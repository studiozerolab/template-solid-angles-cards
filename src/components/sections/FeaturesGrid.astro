---
import AngleEdge from "../ui/AngleEdge.astro";

const {
  id,
  title,
  items = [],
  bg,       // surface | alt | primary-tint | accent-tint
  nextBg,
  angleTop,
  angleBottom,
  dirTop,   // left | right
  dirBottom, // left | right
} = Astro.props;

const bgClass =
  bg === "alt" ? "section-alt" :
  bg === "primary-tint" ? "section-primary-tint" :
  bg === "accent-tint" ? "section-accent-tint" :
  "section-surface";

const nextColor =
  nextBg === "alt" ? "#F8FAFC" :
  nextBg === "primary-tint" ? "color-mix(in srgb, #2563EB 6%, #ffffff)" :
  nextBg === "accent-tint" ? "color-mix(in srgb, #F59E0B 6%, #ffffff)" :
  "#FFFFFF";
---

<section id={id} class={`section ${bgClass}`}>
  {angleTop && <AngleEdge position="top" direction={dirTop} fill="#FFFFFF" height={120} />}

  <div class="card-shell px-6 py-16">
    <h2 class="text-2xl md:text-3xl font-bold mb-8">{title}</h2>
    <div class="card-grid">
      {items.map((it) => (
        <article class="card-vitae">
          {it.image && <img src={it.image} alt="" loading="lazy" />}
          <div class="body">
            <h3>{it.title}</h3>
            {it.body && <p>{it.body}</p>}
            <a href={it.href ?? "#"} class="cta hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-primary/30">Learn more</a>
          </div>
        </article>
      ))}
    </div>
  </div>

  {angleBottom && <AngleEdge position="bottom" direction={dirBottom} fill={nextColor} height={120} />}
</section>
